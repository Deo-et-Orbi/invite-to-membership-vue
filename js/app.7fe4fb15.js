(function(e){function t(t){for(var r,s,o=t[0],u=t[1],c=t[2],f=0,p=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";n("85ec")},"85ec":function(e,t,n){},caa5:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var r=n("1da1"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("d3b7"),n("260b")),i=(n("ea7b"),n("5f5b")),s=n("b1e0"),o=(n("f9e3"),n("2dd8"),n("2b0e")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("EnsureLoggedIn",{scopedSlots:e._u([{key:"loggedIn",fn:function(){return[n("AppBar"),n("InvitationsPanel")]},proxy:!0},{key:"loggedOut",fn:function(){return[n("LogInScreen")]},proxy:!0}])})],1)},c=[],l=n("d4ec"),f=n("262e"),p=n("2caf"),b=n("9ab4"),d=n("1b40"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLoggedIn?e._t("loggedIn"):e._t("loggedOut")],2)},h=[],m=n("bee2"),g=function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){var e;return Object(l["a"])(this,n),e=t.apply(this,arguments),e.isLoggedIn=!1,e}return Object(m["a"])(n,[{key:"beforeMount",value:function(){var e=this;a["a"].auth().onAuthStateChanged((function(t){e.isLoggedIn=!!t})),a["a"].auth().currentUser&&(this.isLoggedIn=!0)}}]),n}(d["b"]);g=Object(b["a"])([d["a"]],g);var y=g,j=y,O=n("2877"),k=Object(O["a"])(j,v,h,!1,null,null,null),w=k.exports,R=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},x=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"log-in-screen"},[n("h2",[e._v("Zaloguj się")]),n("section",{attrs:{id:"firebaseui-auth-container"}})])}],_=(n("c9b9"),n("2398")),I=function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){return Object(l["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"mounted",value:function(){this.initializeFirebaseUI()}},{key:"initializeFirebaseUI",value:function(){var e=_["a"].AuthUI.getInstance();e||(e=new _["a"].AuthUI(a["a"].auth()));var t={signInSuccessUrl:window.location.href,signInOptions:[a["a"].auth.GoogleAuthProvider.PROVIDER_ID,a["a"].auth.EmailAuthProvider.PROVIDER_ID]};e.start("#firebaseui-auth-container",t)}}]),n}(d["b"]);I=Object(b["a"])([d["a"]],I);var z=I,S=z,E=(n("f49b"),Object(O["a"])(S,R,x,!1,null,"5ce61d70",null)),N=E.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#"}},[e._v("Invite to DEO membership")]),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",[e._v(e._s(e.displayName))]),n("b-nav-item",{on:{click:function(t){return e.logOut()}}},[e._v("Wyloguj się")])],1)],1)},T=[],P=function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){return Object(l["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"user",get:function(){return a["a"].auth().currentUser}},{key:"displayName",get:function(){return this.user?this.user.displayName||"(no name)":"(no user)"}},{key:"logOut",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].auth().signOut();case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(d["b"]);P=Object(b["a"])([d["a"]],P);var U=P,A=U,D=Object(O["a"])(A,L,T,!1,null,null,null),$=D.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-4"},[n("b-card",{staticClass:"mb-3",attrs:{title:"Wygeneruj link zaproszenia"}},[n("InviteForm",{on:{invited:function(t){return e.reloadList()}}})],1),n("InvitationsList",{ref:"list"})],1)},W=[],M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)},reset:e.onReset}},[n("b-form-group",{attrs:{id:"input-group-1","label-for":"input-1",description:"Do wyświetlenia zaproszenia"}},[n("b-form-input",{attrs:{id:"input-1",placeholder:"Imię i nazwisko",required:""},model:{value:e.displayName,callback:function(t){e.displayName=t},expression:"displayName"}})],1),n("b-form-group",{attrs:{id:"input-group-2","label-for":"textarea-message",description:"Wyświetli się w formularzu zakładania konta"}},[n("b-form-textarea",{attrs:{id:"textarea-message",placeholder:"Wpisz tekst zaproszenia",rows:"3","max-rows":"6",reqired:""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),n("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[e._v("Wygeneruj link zaproszenia")]),n("b-button",{attrs:{type:"reset",variant:"secondary"}},[e._v("Resetuj formularz")]),n("div",{staticClass:"mt-3"},[n("StatefulResource",{attrs:{resource:e.inviteResultResource}},[n("b-alert",{attrs:{variant:"success",show:""}},[e._v(" Udało się. Wyślij tej osobie link zaproszenia: "+e._s(e.invitationLink)+" ")])],1)],1)],1)},F=[],B=n("7dfe");function J(e){return"https://deoetorbi.com/akceptuj-zaproszenie/?deo=".concat(e.id)}function q(e){return V.apply(this,arguments)}function V(){return V=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a["a"].auth().currentUser,n){e.next=3;break}throw new Error("Not logged in");case 3:return e.next=5,n.getIdToken();case 5:return r=e.sent,i="https://deoetorbi.com/nasze/"+t+"?rnd="+Date.now(),e.next=9,fetch(i,{headers:{Authorization:"Bearer "+r}});case 9:if(s=e.sent,s.ok){e.next=15;break}return e.next=13,s.json();case 13:throw o=e.sent,new Error(o.error||"No error description");case 15:return e.abrupt("return",s.json());case 16:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function Z(e,t){return G.apply(this,arguments)}function G(){return G=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,s,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=a["a"].auth().currentUser,r){e.next=3;break}throw new Error("Not logged in");case 3:return e.next=5,r.getIdToken();case 5:return i=e.sent,s="https://deoetorbi.com/nasze/"+t+"?rnd="+Date.now(),e.next=9,fetch(s,{method:"POST",headers:{Authorization:"Bearer "+i,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});case 9:if(o=e.sent,o.ok){e.next=15;break}return e.next=13,o.json();case 13:throw u=e.sent,new Error(u.error||"No error description");case 15:return e.abrupt("return",o.json());case 16:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function H(){return q("api/all_invitations")}function K(e){var t=e.displayName,n=e.message;return Z("api/invite",{displayName:t,message:n})}var Q=function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){var e;return Object(l["a"])(this,n),e=t.apply(this,arguments),e.displayName="",e.message="",e.inviteResultResource=B["Resource"].empty(),e}return Object(m["a"])(n,[{key:"invitation",get:function(){return this.inviteResultResource.result?this.inviteResultResource.result:void 0}},{key:"invitationLink",get:function(){return this.invitation?J(this.invitation):""}},{key:"onSubmit",value:function(){this.submitInvitation()}},{key:"onReset",value:function(){this.displayName="",this.message="",this.inviteResultResource=B["Resource"].empty()}},{key:"submitInvitation",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:B["Resource"].fetchResource("create_invitation",(function(){return K({displayName:t.displayName,message:t.message}).then((function(e){return t.$emit("invited")&&e}))}),(function(e){return t.inviteResultResource=e}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(d["b"]);Q=Object(b["a"])([Object(d["a"])({components:{StatefulResource:B["StatefulResource"]}})],Q);var X=Q,Y=X,ee=Object(O["a"])(Y,M,F,!1,null,null,null),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("StatefulResource",{attrs:{resource:e.invitationsResource}},[n("b-table",{attrs:{striped:"",hover:"",items:e.items,fields:e.fields}})],1)},re=[],ae=n("5530"),ie=(n("d81d"),function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){var e;return Object(l["a"])(this,n),e=t.apply(this,arguments),e.fields=[{key:"displayName",label:"Imię i nazwisko",sortable:!0},{key:"message",label:"Wiadomość"},{key:"tiedEmail",label:"Email"},{key:"createdTime",label:"Czas utworzenia"},{key:"statusText",label:"Status"},{key:"linkURL",label:"Link"}],e.invitationsResource=B["Resource"].empty(),e}return Object(m["a"])(n,[{key:"items",get:function(){if(!this.invitationsResource.result)return[];var e=this.invitationsResource.result;return e.sort((function(e,t){return t.createdTimestampS-e.createdTimestampS})),e.map((function(e){return Object(ae["a"])(Object(ae["a"])({},e),{},{statusText:e.acceptedTimestampS>0?"Zaakceptowane":"Oczekujące",createdTime:new Date(1e3*e.createdTimestampS).toDateString(),linkURL:J(e)})}))}},{key:"beforeMount",value:function(){this.reloadInvitations()}},{key:"reloadInvitations",value:function(){var e=this;B["Resource"].fetchResource("invitations",H,(function(t){e.invitationsResource=t}))}}]),n}(d["b"]));ie=Object(b["a"])([Object(d["a"])({components:{StatefulResource:B["StatefulResource"]}})],ie);var se=ie,oe=se,ue=Object(O["a"])(oe,ne,re,!1,null,null,null),ce=ue.exports,le=function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){return Object(l["a"])(this,n),t.apply(this,arguments)}return Object(m["a"])(n,[{key:"user",get:function(){return a["a"].auth().currentUser}},{key:"displayName",get:function(){return this.user?this.user.displayName||"(brak imienia i nazwiska)":"(brak użytkownika)"}},{key:"logOut",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].auth().signOut();case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reloadList",value:function(){this.$refs.list.reloadInvitations()}}]),n}(d["b"]);le=Object(b["a"])([Object(d["a"])({components:{InviteForm:te,InvitationsList:ce}})],le);var fe=le,pe=fe,be=Object(O["a"])(pe,C,W,!1,null,null,null),de=be.exports,ve=function(e){Object(f["a"])(n,e);var t=Object(p["a"])(n);function n(){return Object(l["a"])(this,n),t.apply(this,arguments)}return n}(d["b"]);ve=Object(b["a"])([Object(d["a"])({components:{EnsureLoggedIn:w,LogInScreen:N,AppBar:$,InvitationsPanel:de}})],ve);var he=ve,me=he,ge=(n("034f"),Object(O["a"])(me,u,c,!1,null,null,null)),ye=ge.exports;function je(e){return Oe.apply(this,arguments)}function Oe(){return Oe=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=function(){new o["default"]({render:function(e){return e(ye)}}).$mount(t)},i=function(){return i=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.t0=a["a"],e.next=6,n.json();case 6:e.t1=e.sent,e.t0.initializeApp.call(e.t0,e.t1);case 8:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},n=function(e){return i.apply(this,arguments)},e.prev=3,e.next=6,n("/__/firebase/init.json");case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e["catch"](3),console.warn("Failed to load firebase from firebase hosting, trying to load dev config. Error: ",e.t0),e.next=13,n("/firebase.init.dev.json");case 13:console.log("Successfully loaded firebase dev config");case 14:s();case 15:case"end":return e.stop()}}),e,null,[[3,8]])}))),Oe.apply(this,arguments)}o["default"].use(i["a"]),o["default"].use(s["a"]),o["default"].config.productionTip=!1,je("#vue-app")},f49b:function(e,t,n){"use strict";n("caa5")}});
//# sourceMappingURL=app.7fe4fb15.js.map